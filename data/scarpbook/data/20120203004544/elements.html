<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:cf="http://docbook.sourceforge.net/xmlns/chunkfast/1.0">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>3.&nbsp;Traditional Elements of Traffic Control</title><meta name="generator" content="DocBook XSL Stylesheets V1.69.0"><link rel="start" href="http://linux-ip.net/articles/Traffic-Control-HOWTO/index.html" title="Traffic Control HOWTO"><link rel="up" href="http://linux-ip.net/articles/Traffic-Control-HOWTO/index.html" title="Traffic Control HOWTO"><link rel="prev" href="http://linux-ip.net/articles/Traffic-Control-HOWTO/overview.html" title="2.&nbsp;Overview of Concepts"><link rel="next" href="http://linux-ip.net/articles/Traffic-Control-HOWTO/components.html" title="4.&nbsp;Components of Linux Traffic Control"><meta xmlns="http://www.w3.org/TR/xhtml1/transitional" name="generator" content="Experimental LDP.XSL $Revision: 1.2 $">
  <!-- Generated by LDP XSLT customization layer
      based on Norman Walsh's DocBook XSL stylesheets.
      More information at http://www.linuxdoc.org/ -->
  
<link rel="stylesheet" type="text/css" href="elements.css" media="all">
</head>
<body><div class="navheader"><table summary="Navigation header" width="100%"><tbody><tr><th colspan="3" align="center">3.&nbsp;Traditional Elements of Traffic Control</th></tr><tr><td width="20%" align="left"><a indepth="true" accesskey="p" href="overview.html">Prev</a>&nbsp;</td><th width="60%" align="center">&nbsp;</th><td width="20%" align="right">&nbsp;<a indepth="true" accesskey="n" href="components.html">Next</a></td></tr></tbody></table><hr></div><div class="section" xml:lang="en" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both;"><a id="elements"></a>3.&nbsp;Traditional Elements of Traffic Control</h2></div></div></div><p>
  </p><div class="section" xml:lang="en" lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="e-shaping"></a>3.1.&nbsp;Shaping</h3></div></div></div><p>
      Shapers delay packets to meet a desired rate.
    </p><p>
      Shaping is the mechanism by which packets are delayed before
      transmission in an output queue to meet a desired output rate.  This is
      one of the most common desires of users seeking bandwidth control
      solutions.  The act of delaying a packet as part of a traffic control
      solution makes every shaping mechanism into a non-work-conserving
      mechanism, meaning roughly:  "Work is required in order to delay
      packets."
    </p><p>
      Viewed in reverse, a non-work-conserving queuing mechanism is performing
      a shaping function.  A work-conserving queuing mechanism (see
      <a indepth="true" href="classful-qdiscs.html#qc-prio" title="7.3.&nbsp;PRIO, priority scheduler">PRIO</a>) would not be capable of delaying a packet.
    </p><p>
      Shapers attempt to limit or ration traffic to meet but not exceed a
      configured rate (frequently measured in packets per second or bits/bytes
      per second).  As a side effect, shapers can smooth out bursty traffic
      <sup>[<a id="id2534758" href="#ftn.id2534758">4</a>]</sup>.
      One of the advantages of shaping bandwidth is the ability to control
      latency of packets.  The underlying mechanism for shaping to a rate is
      typically a token and bucket mechanism.  See also
      <a indepth="true" href="overview.html#o-tokens" title="2.7.&nbsp;Tokens and buckets">Section&nbsp;2.7, “Tokens and buckets”</a> for further detail on tokens and buckets.
    </p></div><div class="section" xml:lang="en" lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="e-scheduling"></a>3.2.&nbsp;Scheduling</h3></div></div></div><p>
      Schedulers arrange and/or rearrange packets for output.
    </p><p>
      Scheduling is the mechanism by which packets are arranged (or
      rearranged) between input and output of a particular queue.  The
      overwhelmingly most common scheduler is the FIFO (first-in first-out)
      scheduler.  From a larger perspective, any set of traffic control
      mechanisms on an output queue can be regarded as a scheduler, because
      packets are arranged for output.
    </p><p>
      Other generic scheduling mechanisms attempt to compensate for various
      networking conditions.  A fair queuing algorithm (see <a indepth="true" href="classless-qdiscs.html#qs-sfq" title="6.3.&nbsp;SFQ, Stochastic Fair Queuing">SFQ</a>)
      attempts to prevent any single client or flow from dominating the
      network usage.  A round-robin algorithm (see WRR) gives each
      flow or client a turn to dequeue packets.  Other sophisticated
      scheduling algorithms attempt to prevent backbone overload (see
      <a indepth="true" href="classless-qdiscs.html#qs-gred" title="6.5.&nbsp;GRED, Generic Random Early Drop">GRED</a>) or refine other scheduling mechanisms (see
      <a indepth="true" href="classless-qdiscs.html#qs-esfq" title="6.4.&nbsp;ESFQ, Extended Stochastic Fair Queuing">ESFQ</a>).
    </p></div><div class="section" xml:lang="en" lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="e-classifying"></a>3.3.&nbsp;Classifying</h3></div></div></div><p>
      Classifiers sort or separate traffic into queues.
    </p><p>
      Classifying is the mechanism by which packets are separated for
      different treatment, possibly different output queues.  During the
      process of accepting, routing and transmitting a packet, a networking
      device can classify the packet a number of different ways.
      Classification can include
      <a indepth="true" href="elements.html#e-marking" title="3.6.&nbsp;Marking">marking</a> the packet, which usually
      happens on the boundary of a network under a single administrative
      control or classification can occur on each hop individually.
    </p><p>
      The Linux model (see
      <a indepth="true" href="components.html#c-filter" title="4.3.&nbsp;filter">Section&nbsp;4.3, “<code class="constant">filter</code>”</a>) allows for a packet to cascade across a
      series of classifiers in a traffic control structure and to be
      classified in conjunction with
      <a indepth="true" href="elements.html#e-policing" title="3.4.&nbsp;Policing">policers</a> (see also
      <a indepth="true" href="components.html#c-police" title="4.5.&nbsp;policer">Section&nbsp;4.5, “policer”</a>).
    </p></div><div class="section" xml:lang="en" lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="e-policing"></a>3.4.&nbsp;Policing</h3></div></div></div><p>
      Policers measure and limit traffic in a particular queue.
    </p><p>
      Policing, as an element of traffic control, is simply
      a mechanism by which traffic can be limited.  Policing is most
      frequently used on the network border to ensure that a peer is not
      consuming more than its allocated bandwidth.  A policer will accept
      traffic to a certain rate, and then perform an action on traffic
      exceeding this rate.  A rather harsh solution is to
      <a indepth="true" href="elements.html#e-dropping" title="3.5.&nbsp;Dropping">drop</a> the traffic, although the
      traffic could be
      <a indepth="true" href="elements.html#e-classifying" title="3.3.&nbsp;Classifying">reclassified</a> instead of being
      dropped.
    </p><p>
      A policer is a yes/no question about the rate at which traffic is
      entering a queue.  If the packet is about to enter a queue below a given
      rate, take one action (allow the enqueuing).  If the packet is about to
      enter a queue above a given rate, take another action.  Although the
      policer uses a token bucket mechanism internally, it does not have the
      capability to delay a packet as a <a indepth="true" href="elements.html#e-shaping" title="3.1.&nbsp;Shaping">shaping</a> mechanism does.
    </p></div><div class="section" xml:lang="en" lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="e-dropping"></a>3.5.&nbsp;Dropping</h3></div></div></div><p>
      Dropping discards an entire packet, flow or classification.
    </p><p>
      Dropping a packet is a mechanism by which a packet is discarded.
    </p><p>
    </p></div><div class="section" xml:lang="en" lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="e-marking"></a>3.6.&nbsp;Marking</h3></div></div></div><p>
      Marking is a mechanism by which the packet is altered.
    </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><table summary="Note" border="0"><tbody><tr><td rowspan="2" valign="top" width="25" align="center"><img alt="[Note]" src="note.png"></td><th align="left">Note</th></tr><tr><td valign="top" align="left">
      This is not <code class="constant">fwmark</code>.  The <span><strong class="command">iptables</strong></span> target <code class="constant">MARK</code> and the
      <span><strong class="command">ipchains</strong></span><code class="option">--mark</code> are used to modify packet metadata, not the packet
      itself.
    </td></tr></tbody></table></div><p>
      Traffic control marking mechanisms install a DSCP on the packet
      itself, which is then used and respected by other routers inside an
      administrative domain (usually for DiffServ).
    </p></div><div class="footnotes"><br><hr width="100" align="left"><div class="footnote"><p><sup>[<a id="ftn.id2534758" href="#id2534758">4</a>] </sup>
          This smoothing effect is not always desirable, hence the HTB
          parameters burst and cburst.
        </p></div></div></div><div class="navfooter"><hr><table summary="Navigation footer" width="100%"><tbody><tr><td width="40%" align="left"><a indepth="true" accesskey="p" href="overview.html">Prev</a>&nbsp;</td><td width="20%" align="center">&nbsp;</td><td width="40%" align="right">&nbsp;<a indepth="true" accesskey="n" href="components.html">Next</a></td></tr><tr><td valign="top" width="40%" align="left">2.&nbsp;Overview of Concepts&nbsp;</td><td width="20%" align="center"><a accesskey="h" href="http://linux-ip.net/articles/Traffic-Control-HOWTO/index.html">Home</a></td><td valign="top" width="40%" align="right">&nbsp;4.&nbsp;Components of Linux Traffic Control</td></tr></tbody></table></div>


</body></html>
