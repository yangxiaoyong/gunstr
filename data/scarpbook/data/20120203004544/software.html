<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:cf="http://docbook.sourceforge.net/xmlns/chunkfast/1.0">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>5.&nbsp;Software and Tools</title><meta name="generator" content="DocBook XSL Stylesheets V1.69.0"><link rel="start" href="http://linux-ip.net/articles/Traffic-Control-HOWTO/index.html" title="Traffic Control HOWTO"><link rel="up" href="http://linux-ip.net/articles/Traffic-Control-HOWTO/index.html" title="Traffic Control HOWTO"><link rel="prev" href="http://linux-ip.net/articles/Traffic-Control-HOWTO/components.html" title="4.&nbsp;Components of Linux Traffic Control"><link rel="next" href="http://linux-ip.net/articles/Traffic-Control-HOWTO/classless-qdiscs.html" title="6.&nbsp;Classless Queuing Disciplines (qdiscs)"><meta xmlns="http://www.w3.org/TR/xhtml1/transitional" name="generator" content="Experimental LDP.XSL $Revision: 1.2 $">
  <!-- Generated by LDP XSLT customization layer
      based on Norman Walsh's DocBook XSL stylesheets.
      More information at http://www.linuxdoc.org/ -->
  
<link rel="stylesheet" type="text/css" href="software.css" media="all">
</head>
<body><div class="navheader"><table summary="Navigation header" width="100%"><tbody><tr><th colspan="3" align="center">5.&nbsp;Software and Tools</th></tr><tr><td width="20%" align="left"><a indepth="true" accesskey="p" href="components.html">Prev</a>&nbsp;</td><th width="60%" align="center">&nbsp;</th><td width="20%" align="right">&nbsp;<a indepth="true" accesskey="n" href="classless-qdiscs.html">Next</a></td></tr></tbody></table><hr></div><div class="section" xml:lang="en" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both;"><a id="software"></a>5.&nbsp;Software and Tools</h2></div></div></div><p>
  </p><div class="section" xml:lang="en" lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="s-kernel"></a>5.1.&nbsp;Kernel requirements</h3></div></div></div><p>
      Many distributions provide kernels with modular or monolithic support
      for traffic control (Quality of Service).  Custom kernels may not
      already provide support (modular or not) for the required features.  If
      not, this is a very brief listing of the required kernel options.
    </p><p>
      The user who has little or no experience compiling a kernel is
      recommended to <a xmlns="http://www.w3.org/TR/xhtml1/transitional" class="nonlocal" href="http://tldp.org/HOWTO/Kernel-HOWTO/" target="_top">Kernel
         HOWTO</a>.  Experienced kernel compilers should
      be able to determine which of the below options apply to the desired
      configuration, after reading a bit more about traffic control and
      planning.
    </p><div class="example"><a id="ex-s-kernel-options"></a><p class="title"><b>Example&nbsp;1.&nbsp;Kernel compilation options
        <sup>[<a id="id2537597" href="#ftn.id2537597">8</a>]</sup>
      </b></p><table xmlns="http://www.w3.org/TR/xhtml1/transitional" bgcolor="#E0E0E0" border="0" width="90%"><tbody><tr><td><pre class="programlisting">#
# QoS and/or fair queueing
#
CONFIG_NET_SCHED=y
CONFIG_NET_SCH_CBQ=m
CONFIG_NET_SCH_HTB=m
CONFIG_NET_SCH_CSZ=m
CONFIG_NET_SCH_PRIO=m
CONFIG_NET_SCH_RED=m
CONFIG_NET_SCH_SFQ=m
CONFIG_NET_SCH_TEQL=m
CONFIG_NET_SCH_TBF=m
CONFIG_NET_SCH_GRED=m
CONFIG_NET_SCH_DSMARK=m
CONFIG_NET_SCH_INGRESS=m
CONFIG_NET_QOS=y
CONFIG_NET_ESTIMATOR=y
CONFIG_NET_CLS=y
CONFIG_NET_CLS_TCINDEX=m
CONFIG_NET_CLS_ROUTE4=m
CONFIG_NET_CLS_ROUTE=y
CONFIG_NET_CLS_FW=m
CONFIG_NET_CLS_U32=m
CONFIG_NET_CLS_RSVP=m
CONFIG_NET_CLS_RSVP6=m
CONFIG_NET_CLS_POLICE=y
      </pre></td></tr></tbody></table></div><p>
      A kernel compiled with the above set of options will provide modular
      support for almost everything discussed in this documentation.  The user
      may need to <span><strong class="command">modprobe
      <em class="replaceable"><code>module</code></em></strong></span> before using a given
      feature.  Again, the confused user is recommended to the
      <a xmlns="http://www.w3.org/TR/xhtml1/transitional" class="nonlocal" href="http://tldp.org/HOWTO/Kernel-HOWTO/" target="_top">Kernel
         HOWTO</a>, as this document cannot adequately address questions
      about the use of the Linux kernel.
    </p></div><div class="section" xml:lang="en" lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="s-iproute2"></a>5.2.&nbsp;<span><strong class="command">iproute2</strong></span> tools (<span><strong class="command">tc</strong></span>)</h3></div></div></div><p>
      <span><strong class="command">iproute2</strong></span> is a suite of command line utilities which
      manipulate kernel structures for IP networking
      configuration on a machine.  For technical documentation on these tools,
      see the <a xmlns="http://www.w3.org/TR/xhtml1/transitional" class="nonlocal" href="http://linux-ip.net/gl/ip-cref/" target="_top">iproute2
         documentation</a> and for a more expository discussion, the
      documentation at <a xmlns="http://www.w3.org/TR/xhtml1/transitional" class="nonlocal" href="http://linux-ip.net/" target="_top">linux-ip.net</a>.  Of the tools in the <span><strong class="command">iproute2</strong></span>
      package, the binary <span><strong class="command">tc</strong></span> is the only one used for traffic control.  This
      HOWTO will ignore the other tools in the suite.
    </p><a id="s-iproute2-tc"></a><p>
      Because it interacts with the kernel to direct the creation, deletion
      and modification of traffic control structures, the <span><strong class="command">tc</strong></span> binary needs to
      be compiled with support for all of the <a indepth="true" href="components.html#c-qdisc" title="4.1.&nbsp;qdisc"><code class="constant">qdisc</code></a>s you wish to use.
      In particular, the HTB qdisc is not supported yet in the upstream
      <span><strong class="command">iproute2</strong></span> package.  See
      <a indepth="true" href="classful-qdiscs.html#qc-htb" title="7.1.&nbsp;HTB, Hierarchical Token Bucket">Section&nbsp;7.1, “HTB, Hierarchical Token Bucket”</a> for more information.
    </p><p>
      The <span><strong class="command">tc</strong></span> tool performs all of the configuration of the kernel structures
      required to support traffic control.  As a result of its many uses, the
      command syntax can be described (at best) as arcane.  The utility takes
      as its first non-option argument one of three Linux traffic control
      components, <a indepth="true" href="components.html#c-qdisc" title="4.1.&nbsp;qdisc"><code class="constant">qdisc</code></a>, <a indepth="true" href="components.html#c-class" title="4.2.&nbsp;class"><code class="constant">class</code></a> or <a indepth="true" href="components.html#c-filter" title="4.3.&nbsp;filter"><code class="constant">filter</code></a>.
    </p><div class="example"><a id="ex-s-iproute2-tc"></a><p class="title"><b>Example&nbsp;2.&nbsp;<span>tc</span> command usage</b></p><table xmlns="http://www.w3.org/TR/xhtml1/transitional" bgcolor="#E0E0E0" border="0" width="90%"><tbody><tr><td><pre class="programlisting"><code xmlns="http://www.w3.org/1999/xhtml" class="prompt">[root@leander]# </code><strong xmlns="http://www.w3.org/1999/xhtml" class="userinput"><code>tc</code></strong>
<code xmlns="http://www.w3.org/1999/xhtml" class="computeroutput">Usage: tc [ OPTIONS ] OBJECT { COMMAND | help }
where  OBJECT := { qdisc | class | filter }
       OPTIONS := { -s[tatistics] | -d[etails] | -r[aw] }</code>
      </pre></td></tr></tbody></table></div><p>
      Each object accepts further and different options, and will be
      incompletely described and documented below.  The hints in the examples
      below are designed to introduce the vagaries of <span><strong class="command">tc</strong></span> command line
      syntax.  For more examples, consult the <a xmlns="http://www.w3.org/TR/xhtml1/transitional" class="nonlocal" href="http://lartc.org/howto/" target="_top">LARTC HOWTO</a>.  For even
      better understanding, consult the kernel and <span><strong class="command">iproute2</strong></span> code.
    </p><div class="example"><a id="ex-s-iproute2-tc-qdisc"></a><p class="title"><b>Example&nbsp;3.&nbsp;<span>tc</span> <a indepth="true" href="components.html#c-qdisc" title="4.1.&nbsp;qdisc"><code class="constant">qdisc</code></a></b></p><table xmlns="http://www.w3.org/TR/xhtml1/transitional" bgcolor="#E0E0E0" border="0" width="90%"><tbody><tr><td><pre class="programlisting"><code xmlns="http://www.w3.org/1999/xhtml" class="prompt">[root@leander]# </code><strong xmlns="http://www.w3.org/1999/xhtml" class="userinput"><code>tc qdisc add    \</code></strong> <a indepth="true" xmlns="http://www.w3.org/1999/xhtml" id="ex-s-itcq-tc" href="software.html#ex-s-itcq-tc-text"><img src="1.png" alt="1" border="0"></a>
<code xmlns="http://www.w3.org/1999/xhtml" class="prompt">&gt; </code><strong xmlns="http://www.w3.org/1999/xhtml" class="userinput"><code>                 dev eth0     \</code></strong> <a indepth="true" xmlns="http://www.w3.org/1999/xhtml" id="ex-s-itcq-dev" href="software.html#ex-s-itcq-dev-text"><img src="2.png" alt="2" border="0"></a>
<code xmlns="http://www.w3.org/1999/xhtml" class="prompt">&gt; </code><strong xmlns="http://www.w3.org/1999/xhtml" class="userinput"><code>                 root         \</code></strong> <a indepth="true" xmlns="http://www.w3.org/1999/xhtml" id="ex-s-itcq-root" href="software.html#ex-s-itcq-root-text"><img src="3.png" alt="3" border="0"></a>
<code xmlns="http://www.w3.org/1999/xhtml" class="prompt">&gt; </code><strong xmlns="http://www.w3.org/1999/xhtml" class="userinput"><code>                 handle 1:0   \</code></strong> <a indepth="true" xmlns="http://www.w3.org/1999/xhtml" id="ex-s-itcq-handle" href="software.html#ex-s-itcq-handle-text"><img src="4.png" alt="4" border="0"></a>
<code xmlns="http://www.w3.org/1999/xhtml" class="prompt">&gt; </code><strong xmlns="http://www.w3.org/1999/xhtml" class="userinput"><code>                 htb</code></strong>            <a indepth="true" xmlns="http://www.w3.org/1999/xhtml" id="ex-s-itcq-qdisc" href="software.html#ex-s-itcq-qdisc-text"><img src="5.png" alt="5" border="0"></a>
      </pre></td></tr></tbody></table><div class="calloutlist"><table summary="Callout list" border="0"><tbody><tr><td valign="top" width="5%" align="left"><a id="ex-s-itcq-tc-text"></a><a href="#ex-s-itcq-tc"><img src="1.png" alt="1" border="0"></a> </td><td valign="top" align="left"><p>
            Add a queuing discipline.  The verb could also be
            <code class="constant">del</code>.
          </p></td></tr><tr><td valign="top" width="5%" align="left"><a id="ex-s-itcq-dev-text"></a><a href="#ex-s-itcq-dev"><img src="2.png" alt="2" border="0"></a> </td><td valign="top" align="left"><p>
            Specify the device onto which we are attaching the new queuing
            discipline.
          </p></td></tr><tr><td valign="top" width="5%" align="left"><a id="ex-s-itcq-root-text"></a><a href="#ex-s-itcq-root"><img src="3.png" alt="3" border="0"></a> </td><td valign="top" align="left"><p>
            This means “<span class="quote">egress</span>” to <span><strong class="command">tc</strong></span>.  The word
            <code class="constant">root</code> must be used, however.  Another
            qdisc with limited functionality, the <code class="constant">ingress</code> qdisc can be
            attached to the same device.
          </p></td></tr><tr><td valign="top" width="5%" align="left"><a id="ex-s-itcq-handle-text"></a><a href="#ex-s-itcq-handle"><img src="4.png" alt="4" border="0"></a> </td><td valign="top" align="left"><p>
            The <a indepth="true" href="components.html#c-handle" title="4.7.&nbsp;handle"><code class="constant">handle</code></a> is a user-specified number of the form
            <em class="replaceable"><code>major</code></em>:<em class="replaceable"><code>minor</code></em>.
            The minor number for any queueing discipline handle must always be
            zero (0).  An acceptable shorthand for a <a indepth="true" href="components.html#c-qdisc" title="4.1.&nbsp;qdisc"><code class="constant">qdisc</code></a> handle is
            the syntax "1:", where the minor number is assumed to be zero (0)
            if not specified.
          </p></td></tr><tr><td valign="top" width="5%" align="left"><a id="ex-s-itcq-qdisc-text"></a><a href="#ex-s-itcq-qdisc"><img src="5.png" alt="5" border="0"></a> </td><td valign="top" align="left"><p>
            This is the queuing discipline to attach, HTB in this
            example.  Queuing discipline specific parameters will follow this.
            In the example here, we add no qdisc-specific parameters.
          </p></td></tr></tbody></table></div></div><p>
      Above was the simplest use of the <span><strong class="command">tc</strong></span> utility for adding a queuing
      discipline to a device.  Here's an example of the use of <span><strong class="command">tc</strong></span> to add a
      class to an existing parent class.
    </p><div class="example"><a id="ex-s-iproute2-tc-class"></a><p class="title"><b>Example&nbsp;4.&nbsp;<span>tc</span> <a indepth="true" href="components.html#c-class" title="4.2.&nbsp;class"><code class="constant">class</code></a></b></p><table xmlns="http://www.w3.org/TR/xhtml1/transitional" bgcolor="#E0E0E0" border="0" width="90%"><tbody><tr><td><pre class="programlisting"><code xmlns="http://www.w3.org/1999/xhtml" class="prompt">[root@leander]# </code><strong xmlns="http://www.w3.org/1999/xhtml" class="userinput"><code>tc class add    \</code></strong> <a indepth="true" xmlns="http://www.w3.org/1999/xhtml" id="ex-s-itcc-tc" href="software.html#ex-s-itcc-tc-text"><img src="1.png" alt="1" border="0"></a>
<code xmlns="http://www.w3.org/1999/xhtml" class="prompt">&gt; </code><strong xmlns="http://www.w3.org/1999/xhtml" class="userinput"><code>                 dev eth0     \</code></strong> <a indepth="true" xmlns="http://www.w3.org/1999/xhtml" id="ex-s-itcc-dev" href="software.html#ex-s-itcc-dev-text"><img src="2.png" alt="2" border="0"></a>
<code xmlns="http://www.w3.org/1999/xhtml" class="prompt">&gt; </code><strong xmlns="http://www.w3.org/1999/xhtml" class="userinput"><code>                 parent 1:1   \</code></strong> <a indepth="true" xmlns="http://www.w3.org/1999/xhtml" id="ex-s-itcc-parent" href="software.html#ex-s-itcc-parent-text"><img src="3.png" alt="3" border="0"></a>
<code xmlns="http://www.w3.org/1999/xhtml" class="prompt">&gt; </code><strong xmlns="http://www.w3.org/1999/xhtml" class="userinput"><code>                 classid 1:6  \</code></strong> <a indepth="true" xmlns="http://www.w3.org/1999/xhtml" id="ex-s-itcc-classid" href="software.html#ex-s-itcc-classid-text"><img src="4.png" alt="4" border="0"></a>
<code xmlns="http://www.w3.org/1999/xhtml" class="prompt">&gt; </code><strong xmlns="http://www.w3.org/1999/xhtml" class="userinput"><code>                 htb          \</code></strong> <a indepth="true" xmlns="http://www.w3.org/1999/xhtml" id="ex-s-itcc-classtype" href="software.html#ex-s-itcc-classtype-text"><img src="5.png" alt="5" border="0"></a>
<code xmlns="http://www.w3.org/1999/xhtml" class="prompt">&gt; </code><strong xmlns="http://www.w3.org/1999/xhtml" class="userinput"><code>                 rate 256kbit \</code></strong> <a indepth="true" xmlns="http://www.w3.org/1999/xhtml" id="ex-s-itcc-htb-rate" href="software.html#ex-s-itcc-htb-only-text"><img src="6.png" alt="6" border="0"></a>
<code xmlns="http://www.w3.org/1999/xhtml" class="prompt">&gt; </code><strong xmlns="http://www.w3.org/1999/xhtml" class="userinput"><code>                 ceil 512kbit</code></strong>   <a indepth="true" xmlns="http://www.w3.org/1999/xhtml" id="ex-s-itcc-htb-ceil" href="software.html#ex-s-itcc-htb-only-text"><img src="7.png" alt="7" border="0"></a>
      </pre></td></tr></tbody></table><div class="calloutlist"><table summary="Callout list" border="0"><tbody><tr><td valign="top" width="5%" align="left"><a id="ex-s-itcc-tc-text"></a><a href="#ex-s-itcc-tc"><img src="1.png" alt="1" border="0"></a> </td><td valign="top" align="left"><p>
             Add a class. The verb could also be <code class="constant">del</code>.
          </p></td></tr><tr><td valign="top" width="5%" align="left"><a id="ex-s-itcc-dev-text"></a><a href="#ex-s-itcc-dev"><img src="2.png" alt="2" border="0"></a> </td><td valign="top" align="left"><p>
            Specify the device onto which we are attaching the new class.
          </p></td></tr><tr><td valign="top" width="5%" align="left"><a id="ex-s-itcc-parent-text"></a><a href="#ex-s-itcc-parent"><img src="3.png" alt="3" border="0"></a> </td><td valign="top" align="left"><p>
            Specify the parent <a indepth="true" href="components.html#c-handle" title="4.7.&nbsp;handle"><code class="constant">handle</code></a> to which we are attaching the new class.
          </p></td></tr><tr><td valign="top" width="5%" align="left"><a id="ex-s-itcc-classid-text"></a><a href="#ex-s-itcc-classid"><img src="4.png" alt="4" border="0"></a> </td><td valign="top" align="left"><p>
            This is a unique <a indepth="true" href="components.html#c-handle" title="4.7.&nbsp;handle"><code class="constant">handle</code></a>
            (<em class="replaceable"><code>major</code></em>:<em class="replaceable"><code>minor</code></em>)
            identifying this class.  The minor number must be any non-zero (0)
            number.
          </p></td></tr><tr><td valign="top" width="5%" align="left"><a id="ex-s-itcc-classtype-text"></a><a href="#ex-s-itcc-classtype"><img src="5.png" alt="5" border="0"></a> </td><td valign="top" align="left"><p>
            Both of the <a indepth="true" href="classful-qdiscs.html" title="7.&nbsp;Classful Queuing Disciplines (qdiscs)">classful qdiscs</a> require that any children classes be
            classes of the same type as the parent.  Thus an HTB qdisc
            will contain HTB classes.
          </p></td></tr><tr><td valign="top" width="5%" align="left"><a id="ex-s-itcc-htb-only-text"></a><a href="#ex-s-itcc-htb-rate"><img src="6.png" alt="6" border="0"></a> <a href="#ex-s-itcc-htb-ceil"><img src="7.png" alt="7" border="0"></a> </td><td valign="top" align="left"><p>
            This is a class specific parameter.  Consult
            <a indepth="true" href="classful-qdiscs.html#qc-htb" title="7.1.&nbsp;HTB, Hierarchical Token Bucket">Section&nbsp;7.1, “HTB, Hierarchical Token Bucket”</a> for more detail on these parameters.
          </p></td></tr></tbody></table></div></div><p>
    </p><div class="example"><a id="ex-s-iproute2-tc-filter"></a><p class="title"><b>Example&nbsp;5.&nbsp;<span>tc</span> <a indepth="true" href="components.html#c-filter" title="4.3.&nbsp;filter"><code class="constant">filter</code></a></b></p><table xmlns="http://www.w3.org/TR/xhtml1/transitional" bgcolor="#E0E0E0" border="0" width="90%"><tbody><tr><td><pre class="programlisting"><code xmlns="http://www.w3.org/1999/xhtml" class="prompt">[root@leander]# </code><strong xmlns="http://www.w3.org/1999/xhtml" class="userinput"><code>tc filter add               \</code></strong> <a indepth="true" xmlns="http://www.w3.org/1999/xhtml" id="ex-s-itcf-tc" href="software.html#ex-s-itcf-tc-text"><img src="1.png" alt="1" border="0"></a>
<code xmlns="http://www.w3.org/1999/xhtml" class="prompt">&gt; </code><strong xmlns="http://www.w3.org/1999/xhtml" class="userinput"><code>                 dev eth0                 \</code></strong> <a indepth="true" xmlns="http://www.w3.org/1999/xhtml" id="ex-s-itcf-dev" href="software.html#ex-s-itcf-dev-text"><img src="2.png" alt="2" border="0"></a>
<code xmlns="http://www.w3.org/1999/xhtml" class="prompt">&gt; </code><strong xmlns="http://www.w3.org/1999/xhtml" class="userinput"><code>                 parent 1:0               \</code></strong> <a indepth="true" xmlns="http://www.w3.org/1999/xhtml" id="ex-s-itcf-parent" href="software.html#ex-s-itcf-parent-text"><img src="3.png" alt="3" border="0"></a>
<code xmlns="http://www.w3.org/1999/xhtml" class="prompt">&gt; </code><strong xmlns="http://www.w3.org/1999/xhtml" class="userinput"><code>                 protocol ip              \</code></strong> <a indepth="true" xmlns="http://www.w3.org/1999/xhtml" id="ex-s-itcf-protocol" href="software.html#ex-s-itcf-protocol-text"><img src="4.png" alt="4" border="0"></a>
<code xmlns="http://www.w3.org/1999/xhtml" class="prompt">&gt; </code><strong xmlns="http://www.w3.org/1999/xhtml" class="userinput"><code>                 prio 5                   \</code></strong> <a indepth="true" xmlns="http://www.w3.org/1999/xhtml" id="ex-s-itcf-prio" href="software.html#ex-s-itcf-prio-text"><img src="5.png" alt="5" border="0"></a>
<code xmlns="http://www.w3.org/1999/xhtml" class="prompt">&gt; </code><strong xmlns="http://www.w3.org/1999/xhtml" class="userinput"><code>                 u32                      \</code></strong> <a indepth="true" xmlns="http://www.w3.org/1999/xhtml" id="ex-s-itcf-classifier" href="software.html#ex-s-itcf-classifier-text"><img src="6.png" alt="6" border="0"></a>
<code xmlns="http://www.w3.org/1999/xhtml" class="prompt">&gt; </code><strong xmlns="http://www.w3.org/1999/xhtml" class="userinput"><code>                 match ip port 22 0xffff  \</code></strong> <a indepth="true" xmlns="http://www.w3.org/1999/xhtml" id="ex-s-itcf-match-port" href="software.html#ex-s-itcf-match-text"><img src="7.png" alt="7" border="0"></a>
<code xmlns="http://www.w3.org/1999/xhtml" class="prompt">&gt; </code><strong xmlns="http://www.w3.org/1999/xhtml" class="userinput"><code>                 match ip tos 0x10 0xff   \</code></strong> <a indepth="true" xmlns="http://www.w3.org/1999/xhtml" id="ex-s-itcf-match-tos" href="software.html#ex-s-itcf-match-text"><img src="8.png" alt="8" border="0"></a>
<code xmlns="http://www.w3.org/1999/xhtml" class="prompt">&gt; </code><strong xmlns="http://www.w3.org/1999/xhtml" class="userinput"><code>                 flowid 1:6               \</code></strong> <a indepth="true" xmlns="http://www.w3.org/1999/xhtml" id="ex-s-itcf-flowid" href="software.html#ex-s-itcf-flowid-text"><img src="9.png" alt="9" border="0"></a>
<code xmlns="http://www.w3.org/1999/xhtml" class="prompt">&gt; </code><strong xmlns="http://www.w3.org/1999/xhtml" class="userinput"><code>                 police                   \</code></strong> <a indepth="true" xmlns="http://www.w3.org/1999/xhtml" id="ex-s-itcf-police" href="software.html#ex-s-itcf-police-text"><img src="10.png" alt="10" border="0"></a>
<code xmlns="http://www.w3.org/1999/xhtml" class="prompt">&gt; </code><strong xmlns="http://www.w3.org/1999/xhtml" class="userinput"><code>                 rate 32000bps            \</code></strong> <a indepth="true" xmlns="http://www.w3.org/1999/xhtml" id="ex-s-itcf-prate" href="software.html#ex-s-itcf-prate-text"><img src="11.png" alt="11" border="0"></a>
<code xmlns="http://www.w3.org/1999/xhtml" class="prompt">&gt; </code><strong xmlns="http://www.w3.org/1999/xhtml" class="userinput"><code>                 burst 10240              \</code></strong> <a indepth="true" xmlns="http://www.w3.org/1999/xhtml" id="ex-s-itcf-burst" href="software.html#ex-s-itcf-burst-text"><img src="12.png" alt="12" border="0"></a>
<code xmlns="http://www.w3.org/1999/xhtml" class="prompt">&gt; </code><strong xmlns="http://www.w3.org/1999/xhtml" class="userinput"><code>                 mpu 0                    \</code></strong> <a indepth="true" xmlns="http://www.w3.org/1999/xhtml" id="ex-s-itcf-mpu" href="software.html#ex-s-itcf-mpu-text"><img src="13.png" alt="13" border="0"></a>
<code xmlns="http://www.w3.org/1999/xhtml" class="prompt">&gt; </code><strong xmlns="http://www.w3.org/1999/xhtml" class="userinput"><code>                 action drop/continue</code></strong>       <a indepth="true" xmlns="http://www.w3.org/1999/xhtml" id="ex-s-itcf-action" href="software.html#ex-s-itcf-action-text"><img src="14.png" alt="14" border="0"></a>
      </pre></td></tr></tbody></table><div class="calloutlist"><table summary="Callout list" border="0"><tbody><tr><td valign="top" width="5%" align="left"><a id="ex-s-itcf-tc-text"></a><a href="#ex-s-itcf-tc"><img src="1.png" alt="1" border="0"></a> </td><td valign="top" align="left"><p>
            Add a filter.  The verb could also be <code class="constant">del</code>.
          </p></td></tr><tr><td valign="top" width="5%" align="left"><a id="ex-s-itcf-dev-text"></a><a href="#ex-s-itcf-dev"><img src="2.png" alt="2" border="0"></a> </td><td valign="top" align="left"><p>
            Specify the device onto which we are attaching the new filter.
          </p></td></tr><tr><td valign="top" width="5%" align="left"><a id="ex-s-itcf-parent-text"></a><a href="#ex-s-itcf-parent"><img src="3.png" alt="3" border="0"></a> </td><td valign="top" align="left"><p>
            Specify the parent handle to which we are attaching the new
            filter.
          </p></td></tr><tr><td valign="top" width="5%" align="left"><a id="ex-s-itcf-protocol-text"></a><a href="#ex-s-itcf-protocol"><img src="4.png" alt="4" border="0"></a> </td><td valign="top" align="left"><p>
            This parameter is required.  It's use should be obvious, although
            I don't know more.
          </p></td></tr><tr><td valign="top" width="5%" align="left"><a id="ex-s-itcf-prio-text"></a><a href="#ex-s-itcf-prio"><img src="5.png" alt="5" border="0"></a> </td><td valign="top" align="left"><p>
            The <em class="parameter"><code>prio</code></em> parameter allows a given filter to
            be preferred above another.  The <em class="parameter"><code>pref</code></em> is a
            synonym.
          </p></td></tr><tr><td valign="top" width="5%" align="left"><a id="ex-s-itcf-classifier-text"></a><a href="#ex-s-itcf-classifier"><img src="6.png" alt="6" border="0"></a> </td><td valign="top" align="left"><p>
            This is a <a indepth="true" href="components.html#c-classifier" title="4.4.&nbsp;classifier"><code class="constant">classifier</code></a>, and is a required phrase in every
            <span><strong class="command">tc</strong></span> <a indepth="true" href="components.html#c-filter" title="4.3.&nbsp;filter"><code class="constant">filter</code></a> command.
          </p></td></tr><tr><td valign="top" width="5%" align="left"><a id="ex-s-itcf-match-text"></a><a href="#ex-s-itcf-match-port"><img src="7.png" alt="7" border="0"></a> <a href="#ex-s-itcf-match-tos"><img src="8.png" alt="8" border="0"></a> </td><td valign="top" align="left"><p>
            These are parameters to the classifier.  In this case, packets
            with a type of service flag (indicating interactive usage) and
            matching port 22 will be selected by this statement.
          </p></td></tr><tr><td valign="top" width="5%" align="left"><a id="ex-s-itcf-flowid-text"></a><a href="#ex-s-itcf-flowid"><img src="9.png" alt="9" border="0"></a> </td><td valign="top" align="left"><p>
            The <em class="parameter"><code>flowid</code></em> specifies the <a indepth="true" href="components.html#c-handle" title="4.7.&nbsp;handle"><code class="constant">handle</code></a> of
            the target class (or qdisc) to which a matching filter should send
            its selected packets.
          </p></td></tr><tr><td valign="top" width="5%" align="left"><a id="ex-s-itcf-police-text"></a><a href="#ex-s-itcf-police"><img src="10.png" alt="10" border="0"></a> </td><td valign="top" align="left"><p>
            This is the <a indepth="true" href="components.html#c-police" title="4.5.&nbsp;policer"><code class="constant">policer</code></a>, and is an optional phrase in every
            <span><strong class="command">tc</strong></span> <a indepth="true" href="components.html#c-filter" title="4.3.&nbsp;filter"><code class="constant">filter</code></a> command.
          </p></td></tr><tr><td valign="top" width="5%" align="left"><a id="ex-s-itcf-prate-text"></a><a href="#ex-s-itcf-prate"><img src="11.png" alt="11" border="0"></a> </td><td valign="top" align="left"><p>
            The policer will perform one action above this rate, and another
            action below (see
            <a indepth="true" href="software.html#ex-s-itcf-action-text">action parameter</a>).
          </p></td></tr><tr><td valign="top" width="5%" align="left"><a id="ex-s-itcf-burst-text"></a><a href="#ex-s-itcf-burst"><img src="12.png" alt="12" border="0"></a> </td><td valign="top" align="left"><p>
            The <em class="parameter"><code>burst</code></em> is an exact analog to <em class="parameter"><code>burst</code></em> in
            <a indepth="true" href="classful-qdiscs.html#qc-htb" title="7.1.&nbsp;HTB, Hierarchical Token Bucket">HTB</a> (<em class="parameter"><code>burst</code></em> is a <a indepth="true" href="overview.html#o-buckets">buckets</a> concept).
          </p></td></tr><tr><td valign="top" width="5%" align="left"><a id="ex-s-itcf-mpu-text"></a><a href="#ex-s-itcf-mpu"><img src="13.png" alt="13" border="0"></a> </td><td valign="top" align="left"><p>
            The minimum policed unit.  To count all traffic, use an
            <em class="parameter"><code>mpu</code></em> of zero (0).
          </p></td></tr><tr><td valign="top" width="5%" align="left"><a id="ex-s-itcf-action-text"></a><a href="#ex-s-itcf-action"><img src="14.png" alt="14" border="0"></a> </td><td valign="top" align="left"><p>
            The <em class="parameter"><code>action</code></em> indicates what should be done if
            the <em class="parameter"><code>rate</code></em> based on the attributes of the policer.  The
            first word specifies the action to take if the policer has been
            exceeded.  The second word specifies action to take otherwise.
          </p></td></tr></tbody></table></div></div><p>
      As evidenced above, the <span><strong class="command">tc</strong></span> command line utility has an arcane and
      complex syntax, even for simple operations such as these examples show.
      It should come as no surprised to the reader that there exists an easier
      way to configure Linux traffic control.  See the next section,
      <a indepth="true" href="software.html#s-tcng" title="5.3.&nbsp;tcng, Traffic Control Next Generation">Section&nbsp;5.3, “<span><strong class="command">tcng</strong></span>, Traffic Control Next Generation”</a>.
    </p></div><div class="section" xml:lang="en" lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="s-tcng"></a>5.3.&nbsp;<span><strong class="command">tcng</strong></span>, Traffic Control Next Generation</h3></div></div></div><p>
      FIXME; sing the praises of tcng.  See also <a xmlns="http://www.w3.org/TR/xhtml1/transitional" class="nonlocal" href="http://tldp.org/HOWTO/Traffic-Control-tcng-HTB-HOWTO/" target="_top">
           Traffic Control using tcng and HTB HOWTO</a> and
      <a xmlns="http://www.w3.org/TR/xhtml1/transitional" class="nonlocal" href="http://linux-ip.net/gl/tcng/" target="_top">tcng
         documentation</a>.
    </p><p>
      Traffic control next generation (hereafter, <span><strong class="command">tcng</strong></span>) provides all of the
      power of traffic control under Linux with twenty percent of the
      headache.
    </p><p>
    </p></div><div class="section" xml:lang="en" lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="s-imq"></a>5.4.&nbsp;IMQ, Intermediate Queuing device</h3></div></div></div><p>
    </p><p>
      FIXME; must discuss IMQ.  See also Patrick McHardy's website on 
      <a xmlns="http://www.w3.org/TR/xhtml1/transitional" class="nonlocal" href="http://trash.net/%7Ekaber/imq/" target="_top">IMQ</a>.
    </p><p>
    </p></div><div class="footnotes"><br><hr width="100" align="left"><div class="footnote"><p><sup>[<a id="ftn.id2537597" href="#id2537597">8</a>] </sup>
            The options listed in this example are taken from a 2.4.20 kernel
            source tree.  The exact options may differ slightly from kernel
            release to kernel release depending on patches and new schedulers
            and classifiers.
          </p></div></div></div><div class="navfooter"><hr><table summary="Navigation footer" width="100%"><tbody><tr><td width="40%" align="left"><a indepth="true" accesskey="p" href="components.html">Prev</a>&nbsp;</td><td width="20%" align="center">&nbsp;</td><td width="40%" align="right">&nbsp;<a indepth="true" accesskey="n" href="classless-qdiscs.html">Next</a></td></tr><tr><td valign="top" width="40%" align="left">4.&nbsp;Components of Linux Traffic Control&nbsp;</td><td width="20%" align="center"><a accesskey="h" href="http://linux-ip.net/articles/Traffic-Control-HOWTO/index.html">Home</a></td><td valign="top" width="40%" align="right">&nbsp;6.&nbsp;Classless Queuing Disciplines (<code class="constant">qdisc</code>s)</td></tr></tbody></table></div>


</body></html>
