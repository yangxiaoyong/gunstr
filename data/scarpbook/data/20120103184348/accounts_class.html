<!DOCTYPE html>
<html lang="en-US" dir="ltr">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">

  	
  	<title>Documentation | Puppet Labs - PE 2.0 » Accounts Module » The pe_accounts Class</title>
  	<meta name="description" content="The open source leader in data center automation">
  	<link rel="alternate" type="text/xml" title="Puppet Labs RSS 0.92 Feed" href="http://puppetlabs.com/feed/rss/">
  	<link rel="alternate" type="application/atom+xml" title="Puppet Labs Atom Feed" href="http://puppetlabs.com/feed/atom/">
  	<link rel="alternate" type="application/rss+xml" title="Puppet Labs RSS 2.0 Feed" href="http://puppetlabs.com/feed/">
  	<link rel="pingback" href="http://puppetlabs.com/xmlrpc.php">
    <link rel="EditURI" type="application/rsd+xml" title="RSD" href="http://puppetlabs.com/xmlrpc.php?rsd">
    <link rel="index" title="Puppet Labs" href="http://docs.puppetlabs.com/">

<!-- Google stats -->


<!-- End Google stats -->


    <!-- FIXME: absolute paths -->

    
    
    
    
    
    

     <!--Add rotation jQuery Script -->
	 	
    

    <!-- All in One SEO Pack 1.6.10.1 by Michael Torbert of Semper Fi Web Design[127,146] -->
    <meta name="keywords" content="Puppet, puppet labs, reductive labs, open source, system administrator, ruby, data center, automation, support">
    <link rel="canonical" href="http://docs.puppetlabs.com/">
    <!-- /all in one seo pack -->
	
    <!-- FIXME: absolute paths -->

     
     <!-- index -->
    

    <!--[if IE 7]>
	  <link rel="stylesheet" type="text/css" href="/files/stylesheets/ie_7.css" media="screen"> <!-- index -->
    <!--[endif]---->
  
    <!--[if IE 8]>
	    <link rel="stylesheet" type="text/css" href="/files/stylesheets/ie_8.css" media="screen"> <!-- index -->
    <!--[endif]---->		

  	

<link rel="stylesheet" type="text/css" href="accounts_class.css" media="all">
</head>
<body id="puppetlabsdocs" class="docs">
  		
  <!--[if IE 8]>
    <style type="text/css">h1, h2{ visibility : visible }</style>
  <![endif]-->		

  	<header id="header">
      <div class="site-width">
    		<h1><a href="http://puppetlabs.com/"><span>Puppet Labs</span></a></h1>
        <a class="screen-reader-content" href="#content">Skip navigation</a>
        <nav>
    		<ul id="global-navigation">
          <li id="puppet-tab" class="with-submenu">
            <a href="http://www.puppetlabs.com/puppet/">
              <span>Products</span>

              <span class="drop-down-trigger"></span>
            </a>
            <ul>            
              <li>
                <ul>
<li class="page_item page-item-769"><a href="http://www.puppetlabs.com/puppet/puppet-enterprise/" title="Puppet Enterprise">Puppet Enterprise</a></li>
<li class="page_item page-item-757"><a href="http://www.puppetlabs.com/puppet/introduction/" title="Puppet">Puppet</a></li>
<li class="page_item page-item-956"><a href="http://www.puppetlabs.com/puppet/how-to-buy/" title="How to Buy">How to Buy</a></li>
<li class="page_item page-item-1159"><a href="http://forge.puppetlabs.com/" title="Module Forge">Module Forge</a></li>

<li class="page_item page-item-2415"><a href="http://www.puppetlabs.com/mcollective/introduction/" title="MCollective">MCollective</a></li>
                </ul>
              </li>
            </ul>
          </li>
          <li id="services-tab" class="with-submenu">
            <a href="http://www.puppetlabs.com/services/">
              <span>Services</span>
              <span class="drop-down-trigger"></span>

            </a>
            <ul>
              <li class="page_item page-item-783"><a href="http://www.puppetlabs.com/services/overview/" title="Overview">Overview</a></li>
<li class="page_item page-item-839"><a href="http://www.puppetlabs.com/services/support/" title="Enterprise Support">Enterprise Support</a></li>
<li class="page_item page-item-845"><a href="http://www.puppetlabs.com/services/training-workshops/" title="On-Site Training &amp; Consulting">On-Site Training &amp; Consulting</a></li>
<li class="page_item page-item-849"><a href="http://docs.puppetlabs.com/category/events/upcoming/" title="Events &amp; Public Training">Events &amp; Public Training</a></li>
<li class="page_item page-item-851"><a href="http://www.puppetlabs.com/services/partners/" title="Partners">Partners</a></li>
<li class="page_item page-item-1037"><a href="http://docs.puppetlabs.com/resources/customer-support" title="Customer Support">Customer Support</a></li>
            </ul>
          </li>
          <li id="resources-tab" class="with-submenu">
            <a href="http://www.puppetlabs.com/resources/">
              <span>Resources</span>

              <span class="drop-down-trigger"></span>
            </a>
            <ul>
              <li class="page_item page-item-1048"><a href="http://www.puppetlabs.com/resources/overview-2/" title="Overview">Overview</a></li>
<li class="page_item page-item-1052"><a href="http://www.puppetlabs.com/resources/customer-support/" title="Customer Support">Customer Support</a></li>
<li class="page_item page-item-1040"><a href="http://docs.puppetlabs.com/" title="Documentation">Documentation</a></li>
<li class="page_item page-item-872"><a href="http://info.puppetlabs.com/register-download" title="Downloads">Downloads</a></li>
<li class="page_item page-item-1961"><a href="http://forge.puppetlabs.com/" title="Module Forge">Module Forge</a></li>
<li class="page_item page-item-835"><a href="http://info.puppetlabs.com/request-whitepapers.html" title="White Papers">White Papers</a></li>
<li class="page_item page-item-1967"><a href="http://projects.puppetlabs.com/projects/puppet/wiki" title="Wiki">Wiki</a></li>
            </ul>

          </li>

<li id="customer-tab" class="with-submenu">
            <a href="http://www.puppetlabs.com/customers/companies/">
              <span>Customers</span>

              <span class="drop-down-trigger"></span>
            </a>
            <ul>
              <li class="page_item page-item-1048"><a href="http://www.puppetlabs.com/customers/companies/" title="Overview">Companies</a></li>
<li class="page_item page-item-1052"><a href="http://www.puppetlabs.com/customers/case-studies/" title="Case Studies">Case Studies</a></li>
<li class="page_item page-item-1040"><a href="http://www.puppetlabs.com/customers/product-testimonials/" title="Product Testimonials">Product Testimonials</a></li>
<li class="page_item page-item-872"><a href="http://www.puppetlabs.com/customers/what-customers-are-saying/" title="ervice Testimonials">Service Testimonials</a></li>
	</ul>
          </li>
         <li id="community-tab" class="with-submenu">
            <a href="http://www.puppetlabs.com/community/">
              <span>Community</span>

              <span class="drop-down-trigger"></span>
            </a>
            <ul>
              <li class="page_item page-item-2195"><a href="http://www.puppetlabs.com/community/overview/" title="Overview">Overview</a></li>
<li class="page_item page-item-2195"><a href="http://www.puppetlabs.com/blog" title="Blog">Blog</a></li>
<li class="page_item page-item-2264"><a href="http://www.puppetlabs.com/community/puppet-camp/" title="Puppet Camp">Puppet Camp</a></li>
<li class="page_item page-item-2249"><a href="http://www.puppetlabs.com/community/user-groups-and-devops-groups/" title="User Groups &amp; DevOps Groups">User Groups &amp; DevOps Groups</a></li>
<li class="page_item page-item-2215"><a href="http://www.puppetlabs.com/community/presentations/" title="Presentations">Presentations</a></li>

<li class="page_item page-item-2217"><a href="http://www.puppetlabs.com/community/videos/" title="Videos">Videos</a></li>
<li class="page_item page-item-2217"><a href="http://www.puppetlabs.com/community/badges/" title="Badges">Badges</a></li>
            </ul>
          </li>

          <li id="company-tab" class="with-submenu">
            <a href="http://www.puppetlabs.com/company/">
              <span>Company</span>
              <span class="drop-down-trigger"></span>
            </a>

            <ul>
              <li class="page_item page-item-2316"><a href="http://www.puppetlabs.com/company/overview/" title="Overview">Overview</a></li>
<li class="page_item page-item-2179"><a href="http://www.puppetlabs.com/company/news/" title="News">News</a></li>
<li class="page_item page-item-1571"><a href="http://www.puppetlabs.com/company/jobs/" title="Jobs">Jobs</a></li>
<li class="page_item page-item-2313"><a href="http://www.puppetlabs.com/company/contact-us/" title="Contact Us">Contact Us</a></li>
            </ul>
          </li>
    		</ul>	   
          <div id="misc-navigation">

			  <ul>
				<li><a href="http://puppetlabs.com/security/">Security</a></li>
				<li><a href="http://docs.puppetlabs.com/">Documentation</a></li>
				<li><a href="http://puppetlabs.com/resources/customer-support/">Support</a></li>
				<li><a href="http://projects.puppetlabs.com/">Bug Tracker</a></li>
				<li><a href="http://puppetlabs.com/company/#contact">Contact Us</a></li>
				<li><a href="http://info.puppetlabs.com/download-pe2.html" class="gateway">Download</a></li>
			  </ul>
			<form action="http://www.google.com/cse" id="cse-search-box">

			  <div>
				<input name="cx" value="017884045025332504017:1mnj-dlgfcc" type="hidden">
				<input name="ie" value="UTF-8" type="hidden">
				<input value="" name="q" size="31" type="text">
				<input name="sa" class="searchbtn" value="Search" type="submit">
			  </div>
			</form>
			

          </div>
      </nav>
    	</div>
    </header>  

      <section id="masthead">
        <div class="site-width">
          <h1>Docs: <span class="section-name">PE 2.0 » Accounts Module » The pe_accounts Class</span></h1>
          <ul id="doc-navigation">
            <li><a href="http://docs.puppetlabs.com/">Docs Home</a></li>
            <li class="with-submenu">
              <a href="#">
                <span>Quick Nav</span>
                <span class="drop-down-trigger"></span>
              </a>
               <!-- the following links can't be relative, unfortunately -->
               <!-- future: add some JS to disable this if running from file:// -->
               	            <dl>
	              <dt>Puppet Guides</dt>
                      <dd><a href="http://docs.puppetlabs.com/index.html">Index</a></dd>
                  <dt>Puppet References</dt>
                      <dd><a href="http://docs.puppetlabs.com/references/stable/type.html">Resource Types</a></dd>
                      <dd><a href="http://docs.puppetlabs.com/references/stable/function.html">Functions</a></dd>
                      <dd><a href="http://docs.puppetlabs.com/references/stable/metaparameter.html">Metaparameters</a></dd>
                      <dd><a href="http://docs.puppetlabs.com/references/stable/configuration.html">Configuration</a></dd>
                      <dt>References By Version</dt>
                      <dd><a href="http://docs.puppetlabs.com/references/2.7.9/">2.7.9</a></dd>
                      <dd><a href="http://docs.puppetlabs.com/references/2.6.13/">2.6.13</a></dd>
                      <dd><a href="http://docs.puppetlabs.com/references/0.25.5/">0.25.5</a></dd>
                      <dd><a href="http://docs.puppetlabs.com/references/0.24.8/">0.24.8</a></dd>
                      <dd><a href="http://docs.puppetlabs.com/references/">Other Versions</a></dd>
                  <dt>MCollective</dt>
                      <dd><a href="http://docs.puppetlabs.com/mcollective/index.html">Index</a></dd>
                      <dd><a href="http://docs.puppetlabs.com/mcollective/simplerpc/index.html">SimpleRPC</a></dd>
                      <dd><a href="http://docs.puppetlabs.com/mcollective/roadmap/index.html">Roadmap</a></dd>
                      <dd><a href="http://docs.puppetlabs.com/mcollective/releasenotes.html">Release Notes</a></dd>
                      <dd><a href="http://docs.puppetlabs.com/mcollective/reference/index.html">References</a></dd>
	            </dl>

            </li>
            <li><a href="http://docs.puppetlabs.com/contribute.html">Contribute</a></li>
          </ul>
        </div>
      </section>
    
      <section id="content">
        <div class="site-width">
          <div class="primary-secondary-content">
            <div class="primary-content">
              <h1 id="the-peaccounts-class">The <code>pe_accounts</code> Class</h1>

<p>This class is part of <code>pe_accounts</code>, a pre-built Puppet module that ships with Puppet Enterprise.</p>

<p>The <code>pe_accounts</code> class can do any or all of the following:</p>

<ul>
  <li>Create and manage a set of <code>pe_accounts::user</code> resources</li>
  <li>Create and manage a set of shared <code>group</code> resources</li>
  <li>Maintain a pair of rules in the <code>sudoers</code> file to grant privileges to the <code>sudo</code> and <code>sudonopw</code> groups</li>
</ul>

<p>This class is designed for cases where your account data is <strong>maintained separately</strong> from your Puppet manifests. This usually means one of the following is true:</p>

<ul>
  <li>The data is being read from a non-Puppet directory service or CMDB, probably with a custom function.</li>
  <li>The data is being maintained manually by a user who does not write Puppet code.</li>
  <li>The data is being generated by an out-of-band process.</li>
</ul>

<p>If your site’s account data will be maintained manually by a sysadmin able to write Puppet code, it will make more sense to maintain it as a normal set of <code>pe_accounts::user</code> and <code>group</code> resources, although you may still wish to use the <code>pe_accounts</code> class to maintain <code>sudoers</code> rules. </p>

<p>To manage users and groups with the <code>pe_accounts</code> class, you <strong>must</strong> prepare a data store and configure the class for the data store when you declare it. </p>

<p><strong>Note:</strong> In Puppet Enterprise 1.2, this class was called <code>accounts</code>; it was renamed in PE 2 to avoid namespace conflicts. If you are upgrading and wish to continue using the older name, the upgrader can install a wrapper module to enable it. See <a indepth="true" href="install_upgrading.html">the chapter on upgrading</a> for more details. </p>

<p><strong>Note:</strong> In Puppet Enterprise 2.0.0, this class is assigned to the console’s default group with no parameters, which will prevent it from being redeclared with any configuration. To use the class, you must:</p>

<ul>
  <li>Unassign it from the default group in the console</li>
  <li>Create a wrapper module that declares this class with the necessary parameters</li>
  <li>Re-assign the wrapper class to whichever nodes need it</li>
</ul>

<h2 id="usage-example">Usage Example</h2>

<p>To use YAML files as a data store: </p>

<div class="highlight"><pre><code class="ruby">    <span class="k">class</span> <span class="p">{</span><span class="s1">'pe_accounts'</span><span class="p">:</span>
      <span class="n">data_store</span> <span class="o">=&gt;</span> <span class="n">yaml</span><span class="p">,</span>
    <span class="p">}</span>
</code></pre>
</div>

<p>To use a Puppet class as a data store (and manage <code>sudoers</code> rules):</p>

<div class="highlight"><pre><code class="ruby">    <span class="k">class</span> <span class="p">{</span><span class="s1">'pe_accounts'</span><span class="p">:</span>
      <span class="n">data_store</span>     <span class="o">=&gt;</span> <span class="n">namespace</span><span class="p">,</span>
      <span class="n">data_namespace</span> <span class="o">=&gt;</span> <span class="s1">'site::pe_accounts::data'</span><span class="p">,</span>
      <span class="n">manage_sudoers</span> <span class="o">=&gt;</span> <span class="kp">true</span><span class="p">,</span>
    <span class="p">}</span>
</code></pre>
</div>

<p>To manage <code>sudoers</code> rules without managing any users or groups:</p>

<div class="highlight"><pre><code class="ruby">    <span class="k">class</span> <span class="p">{</span><span class="s1">'pe_accounts'</span><span class="p">:</span>
      <span class="n">manage_users</span>   <span class="o">=&gt;</span> <span class="kp">false</span><span class="p">,</span>
      <span class="n">manage_groups</span>  <span class="o">=&gt;</span> <span class="kp">false</span><span class="p">,</span>
      <span class="n">manage_sudoers</span> <span class="o">=&gt;</span> <span class="kp">true</span><span class="p">,</span>
    <span class="p">}</span>
</code></pre>
</div>

<h2 id="data-stores">Data Stores</h2>

<p>Account data can come from one of two sources: <strong>a Puppet class that declares three variables,</strong> or <strong>a set of three <a href="http://yaml.org/">YAML</a> files</strong> stored in <code>/etc/puppetlabs/puppet/data</code>.</p>

<h3 id="using-a-puppet-class-as-a-data-store">Using a Puppet Class as a Data Store</h3>

<p>This option is most useful if you are able to generate or import your user data with a <a href="http://docs.puppetlabs.com/guides/custom_functions.html">custom function</a>, which may be querying from an LDAP directory or some other arbitrary data source.</p>

<p>The Puppet class containing the data <strong>must have a name ending in <code>::data</code>.</strong> (We recommend <code>site::pe_accounts::data</code>.) This class must declare the following variables: </p>

<ul>
  <li><code>$users_hash</code> should be a hash in which each key is the <strong>title of a <code>pe_accounts::user</code> resource</strong> and each value is <strong>a hash containing that resource’s attributes and values.</strong></li>
  <li><code>$groups_hash</code> should be a hash in which each key is the <strong>title of a group</strong> and each value is <strong>a hash containing that resource’s attributes and values.</strong></li>
</ul>

<p><a href="#data-formats">See below</a> for examples of the data formats used in these variables.</p>

<p>When declaring the <code>pe_accounts</code> class to use data in a Puppet class, use the following attributes: </p>

<pre><code>data_store     =&gt; namespace,
data_namespace =&gt; {name of class},
</code></pre>

<h3 id="using-yaml-files-as-a-data-store">Using YAML Files as a Data Store</h3>

<p>This option is most useful if your user data is being generated by an out-of-band process or is being maintained by a user who does not write Puppet manifests.</p>

<p>When storing data in YAML, the following valid <a href="http://yaml.org/">YAML</a> files must exist in <code>/etc/puppetlabs/puppet/data</code>:</p>

<ul>
  <li><code>pe_accounts_users_hash.yaml</code>, which should contain an anonymous hash in which each key is the <strong>title of a <code>pe_accounts::user</code> resource</strong> and each value is <strong>a hash containing that resource’s attributes and values.</strong></li>
  <li><code>pe_accounts_groups_hash.yaml</code>, which should contain an anonymous hash in which each key is the <strong>title of a group</strong> and each value is <strong>a hash containing that resource’s attributes and values.</strong></li>
</ul>

<p><a href="#data-formats">See below</a> for examples of the data formats used in these variables.</p>

<p>When declaring the <code>pe_accounts</code> class to use data in YAML files, use the following attribute: </p>

<pre><code>data_store =&gt; yaml,
</code></pre>

<h3 id="data-formats">Data Formats</h3>

<p>This class uses three hashes of data to construct the <code>pe_accounts::user</code> and <code>group</code> resources it manages. </p>

<h4 id="the-users-hash">The Users Hash</h4>

<p>The <strong>users hash</strong> represents a set of <code>pe_accounts::user</code> resources. Each key should be the <strong>title of a <code>pe_accounts::user</code> resource,</strong> and each value should be <strong>another hash containing that resource’s attributes and values.</strong> </p>

<h5 id="puppet-example">Puppet Example</h5>

<div class="highlight"><pre><code class="ruby">    <span class="vg">$users_hash</span> <span class="o">=</span> <span class="p">{</span>
      <span class="n">sysop</span> <span class="o">=&gt;</span> <span class="p">{</span>
        <span class="n">locked</span>  <span class="o">=&gt;</span> <span class="kp">false</span><span class="p">,</span>
        <span class="n">comment</span> <span class="o">=&gt;</span> <span class="s1">'System Operator'</span><span class="p">,</span>
        <span class="n">uid</span>     <span class="o">=&gt;</span> <span class="s1">'700'</span><span class="p">,</span>
        <span class="n">gid</span>     <span class="o">=&gt;</span> <span class="s1">'700'</span><span class="p">,</span>
        <span class="n">groups</span>  <span class="o">=&gt;</span> <span class="o">[</span><span class="s1">'admin'</span><span class="p">,</span> <span class="s1">'sudonopw'</span><span class="o">]</span><span class="p">,</span>
        <span class="n">sshkeys</span> <span class="o">=&gt;</span> <span class="o">[</span><span class="s1">'ssh-rsa AAAAB3NzaC1yc2EAAAABIwAAAQEAwLBhQefRiXHSbVNZYKu2o8VWJjZJ/B4LqICXuxhiiNSCmL8j+5zE/VLPIMeDqNQt8LjKJVOQGZtNutW4OhsLKxdgjzlYnfTsQHp8+JMAOFE3BD1spVnGdmJ33JdMsQ/fjrVMacaHyHK0jW4pHDeUU3kRgaGHtX4TnC0A175BNTH9yJliDvddRzdKR4WtokNzqJU3VPtHaGmJfXEYSfun/wFfc46+hP6u0WcSS7jZ2WElBZ7gNO4u2Z+eJjFWS9rjQ/gNE8HHlvmN0IUuvdpKdBlJjzSiKZR+r/Bo9ujQmGY4cmvlvgmcdajM/X1TqP6p3OuouAk5QSPUlDRV91oEHw== sysop+moduledevkey@puppetlabs.com'</span><span class="o">]</span><span class="p">,</span>
      <span class="p">},</span>
      <span class="n">villain</span> <span class="o">=&gt;</span> <span class="p">{</span>
        <span class="n">locked</span>  <span class="o">=&gt;</span> <span class="kp">true</span><span class="p">,</span>
        <span class="n">comment</span> <span class="o">=&gt;</span> <span class="s1">'Test Locked Account'</span><span class="p">,</span>
        <span class="n">uid</span>     <span class="o">=&gt;</span> <span class="s1">'701'</span><span class="p">,</span>
        <span class="n">gid</span>     <span class="o">=&gt;</span> <span class="s1">'701'</span><span class="p">,</span>
        <span class="n">groups</span>  <span class="o">=&gt;</span> <span class="o">[</span><span class="s1">'admin'</span><span class="p">,</span> <span class="s1">'sudonopw'</span><span class="o">]</span><span class="p">,</span>
        <span class="n">sshkeys</span> <span class="o">=&gt;</span> <span class="o">[</span><span class="s1">'ssh-rsa AAAAB3NzaC1yc2EAAAABIwAAAQEAwLBhQefRiXHSbVNZYKu2o8VWJjZJ/B4LqICXuxhiiNSCmL8j+5zE/VLPIMeDqNQt8LjKJVOQGZtNutW4OhsLKxdgjzlYnfTsQHp8+JMAOFE3BD1spVnGdmJ33JdMsQ/fjrVMacaHyHK0jW4pHDeUU3kRgaGHtX4TnC0A175BNTH9yJliDvddRzdKR4WtokNzqJU3VPtHaGmJfXEYSfun/wFfc46+hP6u0WcSS7jZ2WElBZ7gNO4u2Z+eJjFWS9rjQ/gNE8HHlvmN0IUuvdpKdBlJjzSiKZR+r/Bo9ujQmGY4cmvlvgmcdajM/X1TqP6p3OuouAk5QSPUlDRV91oEHw== villain+moduledevkey@puppetlabs.com'</span><span class="o">]</span><span class="p">,</span>
      <span class="p">},</span>
    <span class="p">}</span>
</code></pre>
</div>

<h5 id="yaml-example">YAML Example</h5>

<pre><code>--- 
sysop:
  locked: false
  comment: System Operator
  uid: '700'
  gid: '700'
  groups:
  - admin
  - sudonopw
  sshkeys:
  - ssh-rsa AAAAB3NzaC1yc2EAAAABIwAAAQEAwLBhQefRiXHSbVNZYKu2o8VWJjZJ/B4LqICXuxhiiNSCmL8j+5zE/VLPIMeDqNQt8LjKJVOQGZtNutW4OhsLKxdgjzlYnfTsQHp8+JMAOFE3BD1spVnGdmJ33JdMsQ/fjrVMacaHyHK0jW4pHDeUU3kRgaGHtX4TnC0A175BNTH9yJliDvddRzdKR4WtokNzqJU3VPtHaGmJfXEYSfun/wFfc46+hP6u0WcSS7jZ2WElBZ7gNO4u2Z+eJjFWS9rjQ/gNE8HHlvmN0IUuvdpKdBlJjzSiKZR+r/Bo9ujQmGY4cmvlvgmcdajM/X1TqP6p3OuouAk5QSPUlDRV91oEHw== sysop+moduledevkey@puppetlabs.com
villain:
  locked: true
  comment: Test Locked Account
  uid: '701'
  gid: '701'
  groups:
  - admin
  - sudonopw
  sshkeys:
  - ssh-rsa AAAAB3NzaC1yc2EAAAABIwAAAQEAwLBhQefRiXHSbVNZYKu2o8VWJjZJ/B4LqICXuxhiiNSCmL8j+5zE/VLPIMeDqNQt8LjKJVOQGZtNutW4OhsLKxdgjzlYnfTsQHp8+JMAOFE3BD1spVnGdmJ33JdMsQ/fjrVMacaHyHK0jW4pHDeUU3kRgaGHtX4TnC0A175BNTH9yJliDvddRzdKR4WtokNzqJU3VPtHaGmJfXEYSfun/wFfc46+hP6u0WcSS7jZ2WElBZ7gNO4u2Z+eJjFWS9rjQ/gNE8HHlvmN0IUuvdpKdBlJjzSiKZR+r/Bo9ujQmGY4cmvlvgmcdajM/X1TqP6p3OuouAk5QSPUlDRV91oEHw== villain+moduledevkey@puppetlabs.com
</code></pre>

<h4 id="the-groups-hash">The Groups Hash</h4>

<p>The <strong>groups hash</strong> represents a set of shared <code>group</code> resources. Each key should be the <strong>title of a <code>group</code> resource,</strong> and each value should be <strong>another hash containing that resource’s attributes and values.</strong></p>

<h5 id="puppet-example-1">Puppet Example</h5>

<div class="highlight"><pre><code class="ruby">    <span class="vg">$groups_hash</span> <span class="o">=</span> <span class="p">{</span>
      <span class="n">developer</span> <span class="o">=&gt;</span> <span class="p">{</span>
        <span class="n">gid</span>    <span class="o">=&gt;</span> <span class="mi">3003</span><span class="p">,</span>
        <span class="k">ensure</span> <span class="o">=&gt;</span> <span class="n">present</span><span class="p">,</span>
      <span class="p">},</span>
      <span class="n">sudonopw</span> <span class="o">=&gt;</span> <span class="p">{</span>
        <span class="n">gid</span>    <span class="o">=&gt;</span> <span class="mi">3002</span><span class="p">,</span>
        <span class="k">ensure</span> <span class="o">=&gt;</span> <span class="n">present</span><span class="p">,</span>
      <span class="p">},</span>
      <span class="n">sudo</span>     <span class="o">=&gt;</span> <span class="p">{</span>
        <span class="n">gid</span>    <span class="o">=&gt;</span> <span class="mi">3001</span><span class="p">,</span>
        <span class="k">ensure</span> <span class="o">=&gt;</span> <span class="n">present</span><span class="p">,</span>
      <span class="p">},</span>
      <span class="n">admin</span>    <span class="o">=&gt;</span> <span class="p">{</span>
        <span class="n">gid</span>    <span class="o">=&gt;</span> <span class="mi">3000</span><span class="p">,</span>
        <span class="k">ensure</span> <span class="o">=&gt;</span> <span class="n">present</span><span class="p">,</span>
      <span class="p">},</span>
    <span class="p">}</span>
</code></pre>
</div>

<h5 id="yaml-example-1">YAML Example</h5>

<pre><code>---
developer:
 gid: "3003"
 ensure: "present"
sudonopw:
 gid: "3002"
 ensure: "present"
sudo:
 gid: "3001"
 ensure: "present"
admin:
 gid: "3000"
 ensure: "present"
</code></pre>

<h2 id="parameters">Parameters</h2>

<h3 id="managegroups"><code>manage_groups</code></h3>

<p>Whether to manage a set of shared groups, which can be used by all <code>pe_accounts::user</code> resources. If true, your data store must define these groups in the <code>$groups_hash</code> variable or the <code>pe_accounts_groups_hash.yaml</code> file. Allowed values are <code>true</code> and <code>false</code>; defaults to <code>true</code>.</p>

<h3 id="manageusers"><code>manage_users</code></h3>

<p>Whether to manage a set of <code>pe_accounts::user</code> resources. If true, your data store must define these users in the <code>$users_hash</code> variable or the <code>pe_accounts_users_hash.yaml</code> file. Allowed values are <code>true</code> and <code>false</code>; defaults to <code>true</code>.</p>

<h3 id="managesudoers"><code>manage_sudoers</code></h3>

<p>Whether to add sudo rules to the node’s <code>sudoers</code> file. If true, the class will add <!-- TK why the % sign --> <code>%sudo</code> and <code>%sudonopw</code> groups to the <code>sudoers</code> file and give them full sudo and passwordless sudo privileges respectively. You will need to make sure that the <code>sudo</code> and <code>sudonopw</code> groups exist in the groups hash, and that your chosen users have those groups in their <code>groups</code> arrays. Managing <code>sudoers</code> is not supported on Solaris.</p>

<p>Allowed values are <code>true</code> and <code>false</code>; defaults to <code>false</code>.</p>

<h3 id="datastore"><code>data_store</code></h3>

<p>Which data store to use for accounts and groups.</p>

<p>When set to <code>namespace</code>, data will be read from the puppet class specified in the <code>data_namespace</code> parameter.  When set to <code>yaml</code>, data will be read from specially-named YAML files in the <code>/etc/puppetlabs/puppet/data</code> directory. (If you have changed your <code>$confdir</code>, it will look in <code>$confdir/data</code>.) Example YAML files are provided in the <code>ext/data/</code> directory of this module.</p>

<p>Allowed values are <code>yaml</code> and <code>namespace</code>; defaults to <code>namespace</code>.</p>

<h3 id="datanamespace"><code>data_namespace</code></h3>

<p>The Puppet namespace from which to read data. This must be the name of a Puppet class, and must end with <code>::data</code> (we recommend using <code>site::pe_accounts::data</code>); the class will automatically be declared by the <code>pe_accounts</code> class. The class cannot have any parameters, and must declare variables named:</p>

<ul>
  <li><code>$users_hash</code></li>
  <li><code>$groups_hash</code></li>
</ul>

<p>See the <code>pe_accounts::data</code> class included in this module (in <code>manifests/data.pp</code>) for an example; see <a href="#data-formats">the data formats section</a> for information on each hash’s data structure. </p>

<p>Defaults to <code>pe_accounts::data</code>.</p>

<h3 id="sudoerspath"><code>sudoers_path</code></h3>

<p>The path to the <code>sudoers</code> file on this system. Defaults to <code>/etc/sudoers</code>.</p>


            </div>
            <div class="secondary-content">
                  <div id="subCol">
                  
                  
                      <!-- 
<h3 class="chapter">Contents</h3>
                      
<ol class="toc">
  <li class="toc-lv2"><a href="#usage-example">Usage Example</a></li>
  <li class="toc-lv2"><a href="#data-stores">Data Stores</a>
<ol class="toc">
   <li class="toc-lv3"><a href="#using-a-puppet-class-as-a-data-store">Using a Puppet Class as a Data Store</a></li>
   <li class="toc-lv3"><a href="#using-yaml-files-as-a-data-store">Using YAML Files as a Data Store</a></li>
   <li class="toc-lv3"><a href="#data-formats">Data Formats</a></li>
</ol></li>
  <li class="toc-lv2"><a href="#parameters">Parameters</a>
<ol class="toc">
   <li class="toc-lv3"><a href="#managegroups">manage_groups</a></li>
   <li class="toc-lv3"><a href="#manageusers">manage_users</a></li>
   <li class="toc-lv3"><a href="#managesudoers">manage_sudoers</a></li>
   <li class="toc-lv3"><a href="#datastore">data_store</a></li>
   <li class="toc-lv3"><a href="#datanamespace">data_namespace</a></li>
   <li class="toc-lv3"><a href="#sudoerspath">sudoers_path</a></li>
</ol></li>
</ol>
 --> 

<ul>
  <li><strong><a indepth="true" href="welcome_getting_started.html">Welcome to Puppet Enterprise</a></strong><ul style="display: none;">
      <li><a indepth="true" href="welcome_getting_started.html">Getting Started</a></li>
      <li><a indepth="true" href="welcome_roles.html">Components and Roles</a></li>
      <li><a indepth="true" href="welcome_whats_new.html">What’s New</a></li>
      <li><a indepth="true" href="welcome_known_issues.html">Known Issues</a></li>
      <li><a indepth="true" href="welcome_getting_support.html">Getting Support</a></li>
    </ul>
  </li>
  <li><strong><a indepth="true" href="install_system_requirements.html">Installing Puppet Enterprise</a></strong><ul style="display: none;">
      <li><a indepth="true" href="install_system_requirements.html">System Requirements</a></li>
      <li><a indepth="true" href="install_preparing.html">Preparing to Install</a></li>
      <li><a indepth="true" href="install_basic.html">Basic Installation</a></li>
      <li><a indepth="true" href="install_upgrading.html">Upgrading</a></li>
      <li><a indepth="true" href="install_automated.html">Automated Installation</a></li>
      <li><a indepth="true" href="install_answer_file_reference.html">Answer File Reference</a></li>
      <li><a indepth="true" href="install_what_and_where.html">What gets installed where?</a></li>
    </ul>
  </li>
  <li><strong><a indepth="true" href="console_accessing.html">The Console</a></strong><ul style="display: none;">
      <li><a indepth="true" href="console_accessing.html">Accessing the Console</a></li>
      <li><a indepth="true" href="console_navigating.html">Navigating the Console</a></li>
      <li><a indepth="true" href="console_reports.html">Viewing Reports and Inventory Data</a></li>
      <li><a indepth="true" href="console_classes_groups.html">Grouping and Classifying Nodes</a></li>
      <li><a indepth="true" href="console_live.html">Live Management</a></li>
      <li><a indepth="true" href="console_live_resources.html">Live Management: Managing Resources</a></li>
      <li><a indepth="true" href="console_live_puppet.html">Live Management: Controlling Puppet</a></li>
      <li><a indepth="true" href="console_live_advanced.html">Live Management: Advanced Tasks</a></li>
    </ul>
  </li>
  <li><strong><a indepth="true" href="puppet_overview.html">Puppet For New PE Users</a></strong><ul style="display: none;">
      <li><a indepth="true" href="puppet_overview.html">Overview</a></li>
      <li><a indepth="true" href="puppet_first_module.html">Your First Module</a></li>
      <li><a indepth="true" href="puppet_classifying.html">Assigning a Class to a Node</a></li>
      <li><a indepth="true" href="puppet_next_steps.html">Next Steps</a></li>
    </ul>
  </li>
  <li><strong><a indepth="true" href="orchestration_overview.html">Orchestration For New PE Users</a></strong><ul style="display: none;">
      <li><a indepth="true" href="orchestration_overview.html">Overview</a></li>
      <li><a indepth="true" href="orchestration_usage.html">Usage and Examples</a></li>
    </ul>
  </li>
  <li><strong><a indepth="true" href="cloudprovisioner_overview.html">Cloud Provisioning</a></strong><ul style="display: none;">
      <li><a indepth="true" href="cloudprovisioner_overview.html">Overview</a></li>
      <li><a indepth="true" href="cloudprovisioner_configuring.html">Configuring and Troubleshooting</a></li>
      <li><a indepth="true" href="cloudprovisioner_vmware.html">Provisioning with VMware</a></li>
      <li><a indepth="true" href="cloudprovisioner_aws.html">Provisioning with AWS</a></li>
      <li><a indepth="true" href="cloudprovisioner_classifying_installing.html">Classifying Nodes and Remotely Installing PE</a></li>
      <li><a indepth="true" href="cloudprovisioner_man_node_vmware.html">Man Page: node_vmware</a></li>
      <li><a indepth="true" href="cloudprovisioner_man_node_aws.html">Man Page: node_aws</a></li>
      <li><a indepth="true" href="cloudprovisioner_man_node.html">Man Page: node</a></li>
    </ul>
  </li>
  <li><strong><a indepth="true" href="compliance_basics.html">The Compliance Workflow</a></strong><ul style="display: none;">
      <li><a indepth="true" href="compliance_basics.html">Basics and UI</a></li>
      <li><a indepth="true" href="compliance_using.html">Using the Compliance Workflow</a></li>
      <li><a indepth="true" href="compliance_tutorial.html">Tutorial</a></li>
    </ul>
  </li>
  <li class="currentsection"><strong>The PE Accounts Module</strong><ul>
      <li><a indepth="true" href="accounts_user_type.html">The <code>pe_accounts::user</code> Type</a></li>
      <li class="currentpage"><strong><em>The <code>pe_accounts</code> Class:</em></strong>
<ol class="toc">
  <li class="toc-lv2"><a href="#usage-example">Usage Example</a></li>
  <li class="toc-lv2"><a href="#data-stores">Data Stores</a>
<ol class="toc">
   <li class="toc-lv3"><a href="#using-a-puppet-class-as-a-data-store">Using a Puppet Class as a Data Store</a></li>
   <li class="toc-lv3"><a href="#using-yaml-files-as-a-data-store">Using YAML Files as a Data Store</a></li>
   <li class="toc-lv3"><a href="#data-formats">Data Formats</a></li>
</ol></li>
  <li class="toc-lv2"><a href="#parameters">Parameters</a>
<ol class="toc">
   <li class="toc-lv3"><a href="#managegroups">manage_groups</a></li>
   <li class="toc-lv3"><a href="#manageusers">manage_users</a></li>
   <li class="toc-lv3"><a href="#managesudoers">manage_sudoers</a></li>
   <li class="toc-lv3"><a href="#datastore">data_store</a></li>
   <li class="toc-lv3"><a href="#datanamespace">data_namespace</a></li>
   <li class="toc-lv3"><a href="#sudoerspath">sudoers_path</a></li>
</ol></li>
</ol></li>
    </ul>
  </li>
  <li><strong><a indepth="true" href="maint_common_config_errors.html">Maintenance and Troubleshooting</a></strong><ul style="display: none;">
      <li><a indepth="true" href="maint_common_config_errors.html">Common Configuration Errors</a></li>
      <li><a indepth="true" href="maint_maintaining_console.html">Console Maintenance Tasks</a></li>
      <li><a indepth="true" href="maint_installing_additional.html">Installing Additional Components</a></li>
      <li><a indepth="true" href="maint_reconfiguring.html">Reconfiguring Complex Settings</a></li>
    </ul>
  </li>
</ul>

                  
                                        <!-- New Ads are inserted here -->
		  			<div id="bannerImage" style="display: block;">&nbsp;</div>
                  </div>
            </div>
          </div>
        </div>
      </section>

		<footer id="footer">
      <div class="site-width">

        <div class="primary-secondary-content">
          <div class="primary-content">
            <section id="newsletter">
                 <h4>Puppet Labs is Hiring</h4>
                 <p><a href="http://www.puppetlabs.com/company/jobs/">Engineers, developers &amp; consultants</a>
                  </p><p>  
		</p><h4>Newsletter</h4>

              <p>Stay up to date on all things puppet</p>
              
				<form class="lpeRegForm formNotEmpty" method="post" enctype="application/x-www-form-urlencoded" action="http://info.puppetlabs.com/index.php/leadCapture/save" ;="" id="mktForm_1013" name="mktForm_1013">
				
				<label>Email Address:</label><span class="mktInput"><input class="mktFormText mktFormEmail" name="Email" id="Email" value="" maxlength="255" type="text"><span class="mktFormMsg"></span></span>
				
				<input id="mktFrmSubmit" class="btn" style="width: auto; overflow: visible; padding-left: 0.25em; padding-right: 0.25em;" value="Subscribe" name="submitButton" onclick='formSubmit(document.getElementById("mktForm_1013")); return false;' type="submit">
				
				<input style="display: none;" id="mktFrmReset" value="Clear" name="resetButton" onclick='formReset(document.getElementById("mktForm_1013")); return false;' type="reset">
	
				<span style="display: none;"><input name="_marketo_comments" value="" type="text"></span>
				<input name="lpId" value="-1" type="hidden">
				<input name="subId" value="100" type="hidden">

				<input name="kw" value="" type="hidden">
				<input name="cr" value="" type="hidden">
				
				<input name="searchstr" value="" type="hidden">
				<input name="lpurl" value="http://info.puppetlabs.com/testsubscription.html?cr={creative}&amp;kw={keyword}" ;="" type="hidden">
				<input name="formid" value="1013" type="hidden">
				<input name="returnURL" value="http://www.puppetlabs.com/misc/subscription-thank-you/" ;="" type="hidden">
				<input name="retURL" value="http://www.puppetlabs.com/misc/subscription-thank-you/" ;="" type="hidden">
				<input name="_mkt_disp" value="return" type="hidden">
				<input name="_mkt_trk" value="" type="hidden">

				</form>
				
				
				
              
<a indepth="true" href="puppet-enterprise.html" class="fbtn">Try Puppet Enterprise FREE</a>

            </section>
            <section id="elsewhere">
              <h4>Get Involved</h4>
              <ul>

                <li class="chat"><a indepth="true" href="default.html" rel="external"><span class="indicator"></span><span>Chat with us on IRC</span></a></li>
		<li class="discussion"><a href="http://groups.google.com/group/puppet-dev" rel="external"><span class="indicator"></span><span>Join the Puppet Developer List</span></a></li>
                <li class="discussion"><a href="http://groups.google.com/group/puppet-users?pli=1" rel="external"><span class="indicator"></span><span>Join the Puppet User List</span></a></li>
                
                <li class="linkedin"><a href="http://www.linkedin.com/groups?about=&amp;gid=696467&amp;trk=anet_ug_grppro" rel="external"><span class="indicator"></span><span>Join the Puppet Users LinkedIn group</span></a></li>	

              </ul>
		<p>
		              		</p><h4>Follow us…</h4>

              		<ul class="followus">

					
			<li><a href="http://feeds.feedburner.com/PuppetLabs" target="_top"><img src="rss.png" border="0"></a></li>
			<li><a href="http://www.facebook.com/pages/Puppet-Labs/219089920711" target="_top"><img src="facebook.png" border="0"></a></li>
			<li><a href="http://www.twitter.com/puppetlabs" target="_top"><img src="twitter.png" border="0"></a></li>
			<li><a href="http://www.linkedin.com/groups?about=&amp;gid=696467&amp;trk=anet_ug_grppro" target="_top"><img src="linkedin_in_icon_32px.png" border="0"></a></li>    <li><a href="https://github.com/puppetlabs" target="_top"><img src="github_icon.png" border="0"></a></li>
					</ul>

              	<p></p>

            </section>
          </div>
          <div class="secondary-content">
            <section id="book-it">
              <h4>Get the book!</h4>

              <p>Written by James Turnbull and Jeff McCune, <a href="http://www.apress.com/9781430230571" rel="nofollow">Pro Puppet</a> is a comprehensive and up-to-date look at Puppet and MCollective. </p>
              <a href="http://www.apress.com/9781430230571" rel="nofollow"><img src="propuppetthumb.png"></a>
            </section>
          </div>
        </div>
      </div>
		</footer>

    <div id="copyright">
      <div class="site-width">
        © 2011 <a href="http://www.puppetlabs.com/" title="Puppet Labs">Puppet Labs</a>
        <span class="vcard">
         <span class="org"></span>
         <a class="email" href="mailto:info@puppetlabs.com">info@puppetlabs.com</a>

          <span class="adr">
           <span class="street-address">411 NW Park Avenue</span>
           /
           <span class="locality">Portland</span>, 
           <span class="region">OR</span>
           <span class="postal-code">97209</span>

          </span>

         <span class="tel">1-877-575-9775</span>
        </span>          
      </div>
    </div>
      
    
  	
  	

	
        


</body></html>
